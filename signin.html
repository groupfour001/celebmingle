<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In | CelebMingle</title>
    <link rel="stylesheet" href="styles/signin.css">
    <style>
      html, body {
        overflow-x: hidden !important;
        background: #181818 !important;
      }
      .signin-container, .signin-form-container, .signin-sidebar {
        box-sizing: border-box !important;
        max-width: 100vw !important;
      }
      .signin-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 3vw 0;
      }
      .signin-form-container {
        background: #222 !important;
        margin: 20px;
        border-radius: 18px;
        box-shadow: 0 4px 32px 0 rgba(212,175,55,0.10);
      }
      .signin-sidebar {
        background: #222 !important;
        margin: 20px;
        border-radius: 18px;
        box-shadow: 0 4px 32px 0 rgba(212,175,55,0.10);
      }
      @media (max-width: 600px) {
        .signin-form-container, .signin-sidebar {
          max-width: 98vw !important;
          width: 98vw !important;
          margin-left: 1vw !important;
          margin-right: 1vw !important;
        }
      }

      /* Premium input styling */
      .input-container, .input-container.password-input {
        background: linear-gradient(90deg, #181818 80%, #222 100%);
        border-radius: 12px;
        border: 1.5px solid #d4af37;
        box-shadow: 0 2px 12px 0 rgba(212,175,55,0.08);
        max-width: 340px;
        width: 92%;
        margin-left: auto;
        margin-right: auto;
        box-sizing: border-box;
        height: 52px;
        display: flex;
        align-items: center;
        margin-bottom: 18px;
        transition: box-shadow 0.2s, border 0.2s;
      }
      .input-container:focus-within {
        box-shadow: 0 0 0 2px #d4af37, 0 2px 16px 0 rgba(212,175,55,0.12);
        border-color: #FFD700;
      }
      .input-container input[type="email"],
      .input-container input[type="password"] {
        max-width: 100%;
        width: 100%;
        height: 52px;
        background: transparent !important;
        color: #FFD700;
        border-radius: 12px;
        border: none;
        box-sizing: border-box;
        margin: 0;
        padding: 0 44px 0 18px;
        display: block;
        font-size: 1.08rem;
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
        letter-spacing: 0.02em;
        outline: none;
        transition: color 0.2s;
      }
      .input-container input[type="email"]::placeholder,
      .input-container input[type="password"]::placeholder {
        color: #bfae7c;
        opacity: 1;
        font-weight: 400;
      }
      .input-container .toggle-password-btn {
        background: none;
        border: none;
        outline: none;
        position: absolute;
        right: 18px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        padding: 0;
        z-index: 2;
        color: #bfae7c;
        font-size: 1.25rem;
        transition: color 0.2s;
      }
      .input-container .toggle-password-btn:hover,
      .input-container .toggle-password-btn:focus {
        color: #FFD700;
      }
      .input-container.password-input {
        position: relative;
      }
      .input-container .toggle-password {
        pointer-events: none;
      }
    </style>
    <link rel="stylesheet" href="styles/signin-animations.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <a href="index.html" class="back-home-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
    <div class="signin-container">
        <div class="signin-form-container">
            <div class="form-header">
                <div class="logo">
                    <h1>CELEB<span>MINGLE</span></h1>
                </div>
                <h2>Sign In to Your Account</h2>
                <p>Welcome back! Please login to continue</p>
            </div>
            <form id="signinForm">
                <div id="sinupMessage" class="messageDiv" style="display: none;"></div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <div class="input-container" style="background: #181818; border-radius: 8px; border: 1px solid #444;
                     max-width: 320px; width: 90%; margin-left: auto; margin-right: auto; box-sizing: border-box; height: 48px; display: flex; 
                     align-items: center;">
                        <input type="email" id="email" name="email" placeholder="Enter your email address" 
                        required style="max-width: 100%; width: 100%; height: 48px; background: #000 !important;
                         color: #fff !important; border-radius: 8px; border: none !important; box-sizing: border-box; margin: 0;
                          padding: 0 16px; display: block;">
                    </div>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="input-container password-input-wrapper" style="background: #181818; border-radius: 8px; border: 1px solid #444; max-width: 320px; width: 90%; margin-left: auto; margin-right: auto; box-sizing: border-box; height: 48px; display: flex; align-items: center; position: relative;">
                        <input type="password" id="password" name="password" placeholder="Enter your password" required autocomplete="current-password" style="max-width: 100%; width: 100%; height: 48px; background: transparent !important; color: #d4af37; border-radius: 8px; border: none; box-sizing: border-box; margin: 0; padding: 0 16px; display: block;">
                        <button type="button" class="password-toggle" aria-label="Show password" style="background: none; border: none; outline: none; position: absolute; right: 18px; top: 50%; transform: translateY(-50%); cursor: pointer; padding: 0; z-index: 2; color: #bfae7c; font-size: 1.25rem;">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>
                <div class="form-group checkbox-group remember-group">
                    <input type="checkbox" id="rememberMe" name="rememberMe">
                    <label for="rememberMe">Remember me</label>
                </div>
                <button type="submit" class="btn signin-btn">Sign In</button>
                <div class="form-links">
                    <a href="#" class="forgot-password-link">Forgot Password?</a>
                </div>
            </form>
            <!-- Forgot Password Modal -->
            <div id="forgotPasswordModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(24,24,24,0.92); z-index:10000; align-items:center; justify-content:center;">
                <div style="background:#222; border-radius:16px; box-shadow:0 4px 32px 0 rgba(212,175,55,0.18); padding:32px 28px; max-width:340px; width:92vw; text-align:center; position:relative; display:flex; flex-direction:column; align-items:center;">
                    <button id="closeForgotModal" aria-label="Close" style="position:absolute; top:18px; right:18px; background:none; border:none; color:#FFD700; font-size:1.3rem; cursor:pointer;"><i class="fas fa-times"></i></button>
                    <h3 style="color:#FFD700; margin-bottom:12px;">Reset Password</h3>
                    <form id="resetPasswordForm">
                        <div style="display:flex; justify-content:center; align-items:center; width:100%; margin-bottom:16px;">
                            <input type="email" id="resetEmail" name="resetEmail" placeholder="Enter your email address" required style="flex:1 1 100%; min-width:0; height:48px; background:#181818; color:#FFD700; border-radius:8px; border:1.5px solid #d4af37; box-sizing:border-box; padding:0 36px; font-size:1.08rem; font-family:'Montserrat',sans-serif; font-weight:500; letter-spacing:0.02em; outline:none; max-width:320px;">
                        </div>
                        <button type="submit" style="width:100%; background:#FFD700; color:#222; border:none; border-radius:8px; padding:10px 0; font-weight:600; font-size:1rem; cursor:pointer;">Send Reset Link</button>
                    </form>
                    <div id="resetMessage" style="display:none; color:#ff4d4f; margin-top:12px; font-size:0.98rem;"></div>
                </div>
            </div>


            <div class="register-link">
                <p>Don't have an account? <a href="register.html" class="gold-link">Register Now</a></p>
            </div>
        </div>
        <div class="signin-sidebar">
            <h3>Why Join CelebMingle?</h3>
            <ul>
                <li><i class="fas fa-star"></i> Connect with your favorite stars</li>
                <li><i class="fas fa-video"></i> Access exclusive content</li>
                <li><i class="fas fa-gift"></i> Enjoy premium member benefits</li>
                <li><i class="fas fa-users"></i> Be part of a vibrant community</li>
            </ul>
            <div class="testimonial">
                <p>"The sign-in process is so smooth and secure. I love being a part of CelebMingle!"</p>
                <div class="testimonial-author">
                    <span>â€” Daniel Craig</span>
                    <span class="member-type">Gold Member</span>
                </div>
            </div>
        </div>
    </div>
    <!-- Loading overlay -->
    <div class="signin-overlay" style="position: fixed; top: 0; left: 0; width: 100%;
     height: 100%; background: rgba(0, 0, 0, 0.8); display: none; align-items: center;
      justify-content: center; z-index: 9999; backdrop-filter: blur(5px);">
        <div class="loading-spinner" style="width: 60px; height: 60px; border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid #FFD700; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        <div class="success-animation" style="display: none;">
            <!-- Enhanced success animation will be injected here -->
        </div>
    </div>

    <style>
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>

    <!-- Error Message Display -->
    <div id="errorDisplay" class="error-display" style="display: none;">
        <div class="error-content">
            <i class="fas fa-exclamation-circle"></i>
            <p id="errorMessage"></p>
        </div>
    </div>

   

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.1.0/firebase-firestore-compat.js"></script>

    <!-- App Scripts -->
    <script src="scripts/firebase-config.js"></script>
    <script src="scripts/signin.js"></script>
    <script>
    // Forgot Password Modal Logic
    document.addEventListener('DOMContentLoaded', function() {
        var forgotLink = document.querySelector('.forgot-password-link');
        var modal = document.getElementById('forgotPasswordModal');
        var closeBtn = document.getElementById('closeForgotModal');
        var resetForm = document.getElementById('resetPasswordForm');
        var resetMessage = document.getElementById('resetMessage');

        forgotLink.addEventListener('click', function(e) {
            e.preventDefault();
            modal.style.display = 'flex';
            resetMessage.style.display = 'none';
            resetForm.reset();
        });
        closeBtn.addEventListener('click', function() {
            modal.style.display = 'none';
        });
        window.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
        resetForm.addEventListener('submit', function(e) {
            e.preventDefault();
            var email = document.getElementById('resetEmail').value;
            if (!email) return;
            resetMessage.textContent = 'Sending...';
            resetMessage.style.display = 'block';
            // Simulate sending delay
            setTimeout(function() {
                resetMessage.textContent = 'Sent Successfully';
                // Simulate sent delay
                setTimeout(function() {
                    // Firebase password reset
                    if (window.firebase && firebase.auth) {
                        firebase.auth().sendPasswordResetEmail(email)
                        .then(function() {
                            resetMessage.textContent = 'You would receive a reset link via email if this email is registered with us.';
                            setTimeout(function() {
                                window.location.reload();
                            }, 1800);
                        })
                        .catch(function(error) {
                            resetMessage.textContent = error.message || 'Failed to send reset link.';
                        });
                    } else {
                        resetMessage.textContent = 'You would receive a reset link via email if this email is registered with us.';
                        setTimeout(function() {
                            window.location.reload();
                        }, 1800);
                    }
                }, 900);
            }, 900);
        });

        // Well popup logic
        function showWellPopup(message) {
            var wellDiv = document.createElement('div');
            wellDiv.style.position = 'fixed';
        wellDiv.style.top = '50%';
        wellDiv.style.left = '50%';
        wellDiv.style.transform = 'translate(-50%, -50%)';
        wellDiv.style.background = '#222';
        wellDiv.style.color = '#FFD700';
        wellDiv.style.padding = '28px 24px';
        wellDiv.style.borderRadius = '16px';
        wellDiv.style.boxShadow = '0 4px 32px 0 rgba(212,175,55,0.18)';
        wellDiv.style.zIndex = '10001';
        wellDiv.style.textAlign = 'center';
        wellDiv.style.fontSize = '1.08rem';
        wellDiv.innerHTML = '<i class="fas fa-envelope" style="font-size:2rem; margin-bottom:12px;"></i><br>' + message;
            document.body.appendChild(wellDiv);
            setTimeout(function() {
                wellDiv.style.opacity = '1';
                wellDiv.style.transition = 'opacity 0.4s';
            }, 10);
            setTimeout(function() {
                wellDiv.style.opacity = '0';
                setTimeout(function() {
                    document.body.removeChild(wellDiv);
                }, 400);
            }, 3500);
    }
        });
    
    </script>
<script>
// Prefill email and password if redirected from payment
document.addEventListener('DOMContentLoaded', function() {
    if (localStorage.getItem('prefillSignin') === 'true') {
        var email = localStorage.getItem('registerEmail') || '';
        var password = localStorage.getItem('registerPassword') || '';
        var emailInput = document.getElementById('email');
        var passwordInput = document.getElementById('password');
        if (emailInput) emailInput.value = email;
        if (passwordInput) passwordInput.value = password;
        // Remove flag so it doesn't prefill again
        localStorage.removeItem('prefillSignin');
    }
});
</script>
</body>
</html>
